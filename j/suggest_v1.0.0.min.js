!function(e){var t,r,a,l,s={},n={};e(document).on("click.suggestor",function(l){var n=e(event.target).closest(".suggest");s[n.attr("id")]&&n.is(".suggest")||e.each(s,function(l,n){t=e(this).attr("id").split("_")[1],r=e(this).parent().find(".sugInp"),a=r.val(),a&&r.val(a.replace(/,\s*$/,"")),e(this).removeClass("slideDown"),delete s[t]})});var c=ncCacheFactory.getCache("sgtr"),o=function(){return"undefined"!=typeof Storage?!0:!1},i=function(e,t){var r=JSON.stringify(t);navigator.sendBeacon?navigator.sendBeacon(e,r):o()&&c.setItem("sug_Tracking",t)},u=function(e,t,r,a,l,s,c,o){var i=[];i.push("autoconcepts"==r?{type:"ac",acFor:t,sel:e,pos:l,cached:s}:"relatedConcept"==r?{type:"rc",rcFor:c,sel:e,pos:l,cached:s}:{sel:e,pos:l});var u=o.form?o.form.attr("id")||o.form.attr("name"):"",d={Events:i,sId:o.sourceId,fId:u,platform:o.platform,appId:o.appId};n[a]=d};e(window).unload(function(){e(".sugInp").each(function(t,r){var a=e(this).attr("trackParams"),l=e(this).val();a&&l&&(a=JSON.parse(a),n[a.id]||u("",l,"autoconcepts",a.id,0,!1,"",{sourceId:a.sourceId,platform:a.platform,appId:a.appId,form:e(this).parents("form")}))}),e.isEmptyObject(n)||i(l,{lgData:n})}),e.fn.suggestor=function(t){var r={url:{},showRelatedConcept:!0,relatedConcept_dataLayer:!0,autoCorrect_dataLayer:!0,maxSuggestions:15,maxHeight:300,multiSearch:!1,startSearchAfter:1,suggestOnClick:!1,whiteListSpecialChar:[],relatedCorrectionText:"Did you mean ?",relatedConceptText:"Related Skills",glbArray:!1,placeholder:!1,trackUserInteraction:!1,grouping:!0,isPrefetch:!0,source:"server",onSelect:function(){},scrollStyle:"",returnFocus:!0,relatedConceptCategory:{skill:"Skills"},form:!1,showDataOnFocus:!1,storageKey:{prefetchKey:"__suggest_prefetch",versionKey:"__suggest_versions"}},a=e.extend({},r,t);l=a.url.trackingURL;var n=function(t,r,l){if(t){var s=this,n=s.id;e.jsonp({url:t+"&callback=suggestCallback",cache:!0,callback:"suggestCallback",beforeSend:function(){l||e("#"+n+" .nLoder").show()},success:function(t){s.cached=!1,t.resultList?e.isEmptyObject(t.resultList)&&s.dropCont.hasClass("slideDown")?U.call(s):(s.dataType="autoconcepts",r(t)):t.resultConcepts?(e.isEmptyObject(t.resultConcepts)?U.call(s):(s.dataType="relatedConcept",a.getRelatedConcepts&&a.getRelatedConcepts(t,s.Qry),a.relatedConcept_dataLayer&&r(t)),s.RCMaxCntr++):t.resultCorrections?(e.isEmptyObject(t.resultCorrections)?U.call(s):(s.dataType="relatedConcept",a.getAutoCorrect&&a.getAutoCorrect(t,s.Qry),a.autoCorrect_dataLayer&&r(t)),s.RCMaxCntr++):r(t)},complete:function(){s.node.find(".nLoder").hide()},error:function(e,t){s.node.find(".nLoder").hide(),U.call(s)}})}},i=function(){var t=this,r=[];if(t.rs_kWrds=[],t.rs_kWrdsStr="",a.showDataOnFocus){for(var l=a.showDataOnFocus,s=l.length-1;s>=0;s--){var n=e.trim(decodeURIComponent(l[s][0]));n&&-1==e.inArray(n.toLowerCase(),r)&&(r.push(n.toLowerCase()),t.rs_kWrds.push(n))}t.rs_kWrdsStr=t.rs_kWrds.join(",").replace(/\s,|,\s/g,",")}var c=a.storageKey,o=c.userCookie?getCookie(c.userCookie):!1;return o?{key:c.prefetchKey+"/uId/"+o,url:a.url.prefetch+"&"+Math.random(1,100)+"&keywords="+t.rs_kWrdsStr+"&uid="+o,keywords:t.rs_kWrdsStr}:t.rs_kWrdsStr?{key:c.prefetchKey,url:a.url.prefetch+"&"+Math.random(1,100)+"&keywords="+t.rs_kWrdsStr,keywords:t.rs_kWrdsStr}:{key:c.prefetchKey,url:a.url.prefetch+"&"+Math.random(1,100)+"&keywords=",keywords:t.rs_kWrdsStr}},d=function(t,r){var a=e.extend({},t.ac,r.ac),l=e.extend({},t.rc,r.rc);return{ac:a,rc:l,ttl:r.ttl,segments:r.segments,keyword_based_data:r.keyword_based_data}},p=function(){var e=this;a.url.checkVersion+=Math.random(0,100),e.prefetchObj=i.call(e),n.call(e,a.url.checkVersion,function(t){v(a.storageKey.versionKey,t);var r=c.getItem(e.prefetchObj.key);if(r)(e.prefetchObj.keywords&&r.keyword_based_data===!1||+new Date(r.ttl)-+new Date<0)&&n.call(e,e.prefetchObj.url+"&segments="+r.segments,function(t){v(e.prefetchObj.key,d(r,t))});else{isDataExist=c.getItem(a.storageKey.prefetchKey);var l=isDataExist?isDataExist.segments:"";n.call(e,e.prefetchObj.url+"&segments="+l,function(t){v(e.prefetchObj.key,t)},!0)}},!0)},f=function(e,t){var r=t,a=t;if(e.setSelectionRange)e.focus(),e.setSelectionRange(r,a);else if(e.createTextRange){var l=e.createTextRange();l.collapse(!0),l.moveEnd("character",a),l.moveStart("character",r),l.select()}},h=function(e){return e.replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&")},g=function(t){return t=e.trim(t).toLowerCase(),t=e.trim(t.substring(t.lastIndexOf(",")+1,t.length))},m=function(t){var r=e.trim(t).replace(/,*$/g,"");return e.trim(r.substring(r.lastIndexOf(",")+1,r.length)).toLowerCase()},v=function(e,t){c.setItem(e,t)},C=function(e,t){if(this.prefetchObj){var r=c.getItem(this.prefetchObj.key);return r&&r[t][e]||(r=c.getItem(a.storageKey.prefetchKey)),r?r[t][e]:!1}return!1},y=function(){var e=this,t=e.inpElm.val();t&&e.inpElm.val(t.replace(/,\s*$/,""))},w=function(t){var r=this,l=r.inpElm.val(),s=l.substring(0,l.lastIndexOf(",")+1);return s=s?s+" ":"",t=e.trim(h(t).replace(/,*$/g,"")),a.multiSearch?s+t+", ":t},k=function(t,r){return e.inArray(t[0],r.find("li.sugTouple"))+1},E=function(e,t){var r=this,l=r.id,s=r.inpElm,n=e.html(),c=w.call(r,n);r.enableRC_for_onfocus=!1,c.length<a.maxlength?(s.val(c),a.trackUserInteraction&&u.call(r,g(c.replace(/[,\s]*$/,"")),g(r.queryChar),r.dataType,r.id,r.posIndex,r.cached,r.Qry,a),a.returnFocus&&f(s[0],s.val().length),t&&M.call(r,s.val()),a.onSelect&&a.onSelect(l,h(n),s,r)):a.onSelect&&a.onSelect(l,"Warning: maximum length reached",s,r)},x=function(e){var t=this,r=t.dropCont.find(e);return r=r.hasClass("category")?r.next():r},b=function(e){e&&e.find(".sAct").removeClass("sAct")},O=function(e,t){var r=this,l=e;return e="prev"==t?e.prev().hasClass("category")?e.prev().prev().length?e.prev().prev():x.call(r," li:last-child"):e.prev().length?e.prev():x.call(r," li:last-child"):e.next().length?e.next().hasClass("category")?e.next().next():e.next():x.call(r," li:first-child"),r.curElm.find(".Sarw").hasClass("sAct")?e.find(".Sarw").addClass("sAct"):e.find(".Sbtn").addClass("sAct"),b(l),a.multiSearch||r.inpElm.val(h(e.find(".Sbtn").html())),e},I=function(t,r){var l=this;return r=e("#"+t),r=r.hasClass("category")?r.next():r,r.find(".Sbtn").addClass("sAct"),a.multiSearch||l.inpElm.val(h(r.find(".Sbtn").html())),r},_=function(e,t){var r;r="object"==typeof e?e.displayTextEn:e;var l="",s="",n="",c="";r=r.replace(/&amp;/gi,"&"),t.split(",")[1]&&a.multiSearch&&(t=B(t)),t=t.replace(/[\s]+/g," ").replace(/^\s/,"").toLowerCase();var o=r,i=o.toLowerCase(),u=i.indexOf(t),d=i,p=t,f=d.indexOf(" "+p)<0?!1:d.indexOf(" "+p),h=d.indexOf("("+p)<0?!1:d.indexOf("("+p),g=d.indexOf("/"+p)<0?!1:d.indexOf("/"+p);(u>=0&&(f||h||g)||0===u)&&(u&&(f?u=f+1:h?u=h+1:g&&(u=g+1)),s=o.substr(0,u),n=o.substr(u,t.length),c="<strong>"+o.substr(u+t.length,o.length)+"</strong>"),n=n?n:r;var m;m=t?s+n+c:n;var v=a.suggestOnClick?'<div class="wrapTable"><div tabindex="-1" class="Sbtn">'+s+n+c+'</div></div><span class="Sarw"></span>':'<div tabindex="-1" class="Sbtn" style="width:100%">'+m+"</div>";return l='<li class="sugTouple">'+v+"</li>"},T=function(e,t){var r={},a=0;for(var l in t)e[l]&&(r[l]=e[l],a++);return[r,a]},R=function(t,r,l){var s,n,c=this,o="";s="resultConcepts"==l?a.relatedConceptCategory:a.category,n=!l&&a.showTitleForSingleBucket?T(r,{rs:"rs"}):T(r,s);var i=n[1];r=n[0],t=t.replace(/&amp;/gi,"&");for(var u in r){var d="",p=0;for(var f in r[u])if(l||p++<a.maxSuggestions){var h=c.inpElm.val().replace(/\s,/g,",").replace(/,\s/g,",").toLowerCase();if(-1!=h.indexOf(",")&&-1!=e.inArray(r[u][f].displayTextEn.toLowerCase(),h.split(",")))continue;d+=_.call(c,r[u][f],t)}d&&i>1?o+=a.grouping?'<li class="category '+u+'">'+(a.category[u]?a.category[u]:u)+"</li>"+d:d:!l&&a.showTitleForSingleBucket?o+='<li class="category '+u+'">Last Searched Keywords</li>'+d:o=d}return e.isEmptyObject(r)||("resultCorrections"==l?o='<li class="category">'+a.relatedCorrectionText+"</li>"+o:"resultConcepts"==l&&(o='<li class="category">'+a.relatedConceptText+"</li>"+o)),o},A=function(){var e=_t.inpElm;a.placeholderTxt=e?e[0].getAttribute("placeholder"):"",e.val(a.placeholderTxt).css({color:"#8B8B8B"})},L=function(){_t.inpElm.val("").css({color:"#444"})},D=function(e){var t=this;W.call(t,t.queryChar,e.resultList,"autoComplete")},K=function(e){var t,r="";t=e?a.relatedConceptCategory:a.category;for(var l in t)r+=l+",";return r.replace(/,$/g,"")},j=function(e,t,r){var l=this,s="",n=a.appId?"&appId="+a.appId:"",i=a.sourceId?"&sourceId="+a.sourceId:"",u=new RegExp("[^a-zA-Z0-9,\\s"+a.whiteListSpecialChar+"]","g");if(l.Qry=t.replace(u,""),l.Qry){if(o()&&l.prefetchObj)var d=c.getItem(a.storageKey.versionKey),s=d?"&version="+d.suggester_v:0;return e+"query="+encodeURIComponent(l.Qry)+n+"&category="+K(r)+"&limit="+a.maxSuggestions+i+s}return!1},W=function(e,t,r){var a=this;a.curElm=void 0;var l=R.call(a,B(e),t,r);l?(a.dropCont.find("ul").html(l),H.call(a)):U.call(a)},F=function(e){var t=this;if(a.multiSearch&&(e=B(e)),e){var r=j.call(t,a.url.autoComplete,e,!1);n.call(t,r,function(e){D.call(t,e)})}},M=function(e){var t=this;z=B(e);var r=$.call(t,z,"rc",a.relatedConceptCategory);if(r[0])U.call(t),t.dataType="relatedConcept",W.call(t,z,r[1],"resultConcepts"),t.RCMaxCntr++;else{U.call(t);var l=j.call(t,a.url.relatedConcept,z,!0);n.call(t,l,function(e){for(var r in e);W.call(t,z,e[r],r)})}},$=function(e,t,r){var a,l=0;if(e&&o()&&(a=C.call(this,e,t)))for(var s in r)a[s]&&(l=1,this.cached=!0);return[l,a]},B=function(t){var r=e.trim(t).replace(/,*$/g,"").toLowerCase();return e.trim(r.substring(r.lastIndexOf(",")+1,r.length))},Q=function(){var t=this;return function(r){{var l,s;e(this)}e(r.target).hasClass("Sarw")?(l=e(r.target).parents("li"),flag=!0):(e(r.target).hasClass("Sbtn")||e(r.target).is("strong"))&&(l=e(r.target).closest("li"),flag=a.suggestOnClick?!1:!0),s=l.find(".Sbtn"),(!a.showRelatedConcept||t.RCMaxCntr>=a.relatedConceptsLimit-1)&&(flag=!1,U.call(t)),t.posIndex=k(l,t.dropCont),a.suggestOnClick&&U.call(t),setTimeout(function(){E.call(t,s,flag)},50)}},U=function(){var t=this,r=t.id;b(t.curElm),t.dropCont.removeClass("slideDown"),t.curElm="",e("#"+r).find(".sWrap").removeClass("sOpen").addClass("sHide"),delete s[r],a.onHide&&a.onHide(),setTimeout(function(){t.enableRC_for_onfocus=!0},500)},H=function(){var t=this,r=t.id;a.width?t.wth=a.width:t.wth=e(document.getElementById(r)).outerWidth()+"px",t.dropCont.css({width:t.wth}).addClass("slideDown"),e("#"+r).find(".sWrap").removeClass("sHide").addClass("sOpen"),s[r]=t.dropCont,a.onShow&&a.onShow()},q=function(){var t=this;t.dropCont.on("mouseover",".Sbtn,.Sarw,strong",function(r){e(this).hasClass("Sbtn")?e(this).addClass("sAct"):e(this).is("strong")?e(this).parent().addClass("sAct"):e(this).addClass("sAct"),b(t.curElm),t.curElm=e(this)}).mouseout(function(r){t.curElm=void 0,b(e(this))})},J=function(t){var r=t.target||t.srcElement;e(r).hasClass("inpWrap")&&e(this).find(".sugInp").focus()},N=function(){var e={};return e.rs=a.showDataOnFocus,e},P=function(t){var r=this;val=e.trim(r.inpElm.val()),r.curOpenSugg=r.id,a.showDataOnFocus&&(e.trim(r.inpElm.val())||(a.category=e.extend({},a.category,{rs:"rs"}),r.rs_kWrdsStr?W.call(r,"",N.call(r)):(i.call(r),r.rs_kWrdsStr&&W.call(r,"",N.call(r))))),a.multiSearch&&val&&val!=a.placeholderTxt?(e.support.placeholder?r.inpElm.val(val.replace(/[,\s]*$/,", ")):setTimeout(function(){r.inpElm.val(val.replace(/[,\s]*$/,", "))},10),a.showRelatedConcept&&r.enableRC_for_onfocus&&r.RCMaxCntr<a.relatedConceptsLimit-1&&M.call(r,m(val))):!e.support.placeholder&&a.placeholder&&a.placeholderTxt==val&&L.call(r)},V=function(){var e=this.val();return e.charCodeAt(e.length-1)},Z=function(t,r){var l=this,s=(t.attr("id"),r.keyCode||r.which);(0==s||229==s)&&(s=V.call(t));var n=l.inpElm,c=l.id,o=e.trim(n.val());if(l.queryChar=o,13==s&&"block"==l.dropCont.css("display"))if(l.curElm){l.posIndex=k(l.curElm,l.dropCont);var i;!a.showRelatedConcept||l.RCMaxCntr>=a.relatedConceptsLimit-1?(i=!1,l.RCMaxCntr++):i=a.suggestOnClick&&l.curElm.find(".Sbtn").hasClass("sAct")?!1:!0,E.call(l,l.curElm.find(".Sbtn"),i),i||U.call(l)}else U.call(l);else if(27==s)U.call(l);else if(o||8!=s&&46!=s)if(s>=48&&90>s||s>=97&&122>=s||16==s||188==s||8==s){if(r.ctrlKey&&86===s&&(o=o.replace(/,$/,""),n.val(o)),o)if("server"==a.source)if(188==s&&-1!=o.lastIndexOf(",")&&a.multiSearch)a.showRelatedConcept&&M.call(l,m(o));else{var u=a.multiSearch?g(o):o;if(u.length>a.startSearchAfter-1){var d=$.call(l,u,"ac",a.category);d[0]?(l.dataType="autoconcepts",W.call(l,o,d[1],"autoComplete")):F.call(l,o)}}else"local"==S.client[c]&&S.returnDataArray(c,o);e("#"+c).find(".sCross").show().click(function(){l.inpElm.val("").focus(),e(this).hide(),U.call(l),l.dropCont.find("ul").html("")})}else r.ctrlKey&&39==s||r.ctrlKey&&40==s?(l.curElm.find(".Sbtn").removeClass("sAct"),l.curElm.children(".Sarw").addClass("sAct")):r.ctrlKey&&37==s||r.ctrlKey&&38==s?(l.curElm.children(".Sarw").removeClass("sAct"),l.curElm.find(".Sbtn").addClass("sAct")):l.dropCont.find("li").length&&("none"==l.dropCont.css("display")&&40==s?H.call(l):38==s?(l.curElm?l.curElm=O.call(l,l.curElm,"prev"):l.curElm=I.call(l,c+" li:last-child",l.curElm),H.call(l)):40==s&&(l.curElm?l.curElm=O.call(l,l.curElm,"next"):l.curElm=I.call(l,c+" li:first-child",l.curElm)));else e("#"+c+" .sCross").hide(),U.call(l)},G=function(e){var t=this,r=e.which||e.keyCode;if(38==r)e.preventDefault();else if(13==r)"block"==t.dropCont.css("display")&&t.curElm&&e.preventDefault();else if(9==r){if(t.curElm){var a=t.curElm.html().replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&");t.inpElm.val(w.call(t,a))}y.call(t),U.call(t)}},X=function(t){var r=this;if(r.id=t.attr("id"),r.enableRC_for_onfocus=!0,r.RCMaxCntr=0,r.inpElm=t.find(".sugInp"),a.placeholderTxt=r.inpElm.attr("placeholder"),r.inpElm.attr({autocomplete:"off",trackParams:JSON.stringify({id:r.id,sourceId:a.sourceId,platform:a.platform,appId:a.appId})}),a.maxlength=r.inpElm.attr("maxlength")||1e4,r.dropCont=e('<div class="sugCont '+a.scrollStyle+'" id="sugDrp_'+r.id+'">').append('<ul class="Sdrop"></ul>'),t.append(r.dropCont),!a.placeholder||e.support.placeholder||e.trim(r.inpElm.val())||A.call(this),r.inpElm.focus(function(){P.call(r)}).keyup(function(t){Z.call(r,e(this),t)}).keydown(function(e){r.curOpenSugg||(r.curOpenSugg=r.id),G.call(r,e)}),t.find(".sWrap").click(J),q.call(r),r.dropCont.on("click",".sugTouple",Q.call(r)),!window.isFistCall&&a.url.prefetch&&o()&&a.isPrefetch&&(p.call(r),isFistCall=!0),a.trackUserInteraction&&o()){var s=c.getItem("sug_Tracking");s&&n.call(r,l+"?lgData="+JSON.stringify(s),function(){c.removeItem("sug_Tracking")})}},Y=function(e){this.node=e,X.call(this,e),this.setTrackingObject=u},ee=this.data("suggestor");return ee||this.each(function(t,r){var a=e(r);ee=new Y(a),a.data("suggestor",ee)}),ee}}(window.jQuery||window.Zepto);